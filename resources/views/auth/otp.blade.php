@extends('layouts.guest')@section('title', 'Verify OTP')@section('content')<div class="auth-wrap">    <div class="auth-bg" aria-hidden="true"></div>    <div class="auth-card">        <div class="auth-header">            <img src="/agent/assets/logo.png" class="toplogo" alt="PIF Portal Logo">            <h1 class="auth-title">Enter One-Time Password</h1>            <p class="auth-subtitle">Please enter the 6-digit code sent to your email.</p>        </div>        <x-email-not-verified />        {{-- Errors --}}        @if ($errors->any())            <div class="alert alert-danger">                {{ $errors->first() }}            </div>        @endif        {{-- Status --}}        @if (session('status'))            <div class="alert alert-success">                {{ session('status') }}            </div>        @endif        <form method="POST" action="{{ route('otp.verify') }}" class="auth-form">            @csrf            <div class="mb-3">                <label for="otp" class="form-label">OTP Code</label>                <div class="auth-input">                    <span class="auth-icon" aria-hidden="true">                        <!-- Tabler key icon -->                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none"                             stroke="currentColor" stroke-width="2"                             stroke-linecap="round" stroke-linejoin="round">                            <path d="M16.5 10.5a4.5 4.5 0 1 0-1.5 3.4V16h-2v2h-2v2H7v-3.5l5.2-5.2a4.5 4.5 0 0 0 4.3-.8z"></path>                        </svg>                    </span>                    <input type="text"                           name="otp"                           id="otp"                           class="form-control auth-otp"                           required                           autofocus                           inputmode="numeric"                           pattern="[0-9]{6}"                           maxlength="6"                           placeholder="6-digit code">                </div>            </div>            <button class="btn btn-primary w-100 auth-btn mb-2" type="submit">                Verify            </button>        </form>        {{-- Resend --}}        <form method="POST" action="{{ route('otp.resend') }}" id="resend-form">            @csrf            <button type="submit"                    id="resend-btn"                    class="btn btn-link w-100 auth-link-btn"                    disabled>                Resend OTP (<span id="timer">60</span>s)            </button>        </form>        {{-- Lock countdown --}}        @if(session('locked_until'))            <div class="alert alert-warning text-center mt-3">                Account locked.                Try again in <strong><span id="lock-timer"></span></strong>            </div>        @endif    </div></div>    <div class="auth-legal">        © 2026 Pinnacle International Freight Limited — Unit 1 Swannington Road,        Broughton Astley, Leicester, LE9 6TU, UK. All rights reserved.    </div></div>{{-- Timers --}}<script>    let resendSeconds = 60;    const resendBtn = document.getElementById('resend-btn');    const timerEl = document.getElementById('timer');    const resendInterval = setInterval(() => {        resendSeconds--;        timerEl.innerText = resendSeconds;        if (resendSeconds <= 0) {            resendBtn.disabled = false;            resendBtn.innerText = 'Resend OTP';            clearInterval(resendInterval);        }    }, 1000);</script>@if(session('locked_until'))<script>    const lockUntil = new Date("{{ session('locked_until') }}").getTime();    const lockInterval = setInterval(() => {        const now = new Date().getTime();        const diff = lockUntil - now;        if (diff <= 0) {            location.reload();        }        const minutes = Math.floor(diff / 60000);        const seconds = Math.floor((diff % 60000) / 1000);        document.getElementById('lock-timer').innerText =            `${minutes}:${seconds.toString().padStart(2,'0')}`;    }, 1000);</script>@endif@endsection